---
import Layout from '../../layouts/Layout.astro';
import Navigation from '../../components/Navigation.astro';
import '../../styles/global.css';
import { t } from '../../i18n/translations';
import Footer from '../../components/Footer.astro';

const lang = 'fr';
---

<Layout title="Explorer la Théorie des Perspectives | Himalaya Girard">
	<Navigation lang={lang} currentPath="/fr/explore" spacerBg="bg-[#003049]" />
	<main class="min-h-screen bg-[#FFF9ED]">
		<!-- Hero Section -->
		<section class="relative py-20 px-6 overflow-hidden">
			<div class="absolute inset-0 opacity-5 pointer-events-none">
				<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
					<defs>
						<pattern id="grid-explore" width="40" height="40" patternUnits="userSpaceOnUse">
							<path d="M 40 0 L 0 0 0 40" fill="none" stroke="#003049" stroke-width="1"/>
						</pattern>
					</defs>
					<rect width="100%" height="100%" fill="url(#grid-explore)" />
				</svg>
			</div>

			<div class="max-w-5xl mx-auto text-center relative z-10">
				<div class="inline-block px-4 py-2 bg-[#003049]/5 text-[#003049] rounded-lg text-sm font-bold uppercase tracking-widest mb-6 border border-[#003049]/10">
					{t("explore.badge", lang)}
				</div>
				<h1 class="font-figtree text-5xl md:text-6xl font-bold text-[#003049] mb-6 leading-tight">
					{t("explore.title", lang)} <span class="text-[#780000]">{t("explore.titleHighlight", lang)}</span>
				</h1>
				<p class="font-figtree text-xl text-[#003049]/70 leading-relaxed max-w-3xl mx-auto">
					{t("explore.subtitle", lang)}
				</p>
			</div>
		</section>

		<!-- Narrative Hook -->
		<section class="py-12 px-6">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#780000] p-10 rounded-2xl shadow-lg relative overflow-hidden">
					<!-- Decorative circle -->
					<div class="absolute top-0 right-0 w-64 h-64 bg-[#FFF9ED] rounded-full mix-blend-overlay opacity-10 transform translate-x-1/3 -translate-y-1/3"></div>

					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-6 text-center relative z-10">
						Votre Cerveau Calcule. Juste Pas Comme Vous le Pensez.
					</h2>
					<div class="space-y-4 text-[#FFF9ED]/90 font-figtree text-lg leading-relaxed relative z-10">
						<p>
							En 1979, Kahneman et Tversky ont demandé aux gens de choisir entre différents paris. Des jeux simples avec des probabilités claires. Puis ils ont rétro-conçu les "mathématiques" que le cerveau des gens utilisait.
						</p>
						<p>
							Il s'avère que nous calculons la valeur attendue. Juste pas avec les vrais nombres. Nous faisons quelque chose de plus étrange. <strong>Nous distordons les probabilités. Nous ressentons les pertes plus que les gains. Nous suivons des patterns.</strong>
						</p>
						<div class="bg-[#FFF9ED]/10 p-4 rounded-lg border-l-4 border-[#FFF9ED] mt-6">
							<p class="font-semibold text-[#FFF9ED]">
								Ce travail a remporté le Prix Nobel en 2002. Maintenant je teste si les mêmes mathématiques expliquent la confiance.
							</p>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- {t("explore.math.value", lang)} Section -->
		<section class="py-16 px-6">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">1. Sensibilité aux Résultats</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						Comment nous percevons les gains et les pertes. <strong>Les pertes semblent plus importantes que les gains</strong> (aversion à la perte), et <strong>la valeur marginale diminue</strong> à mesure que les montants augmentent.
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-2xl shadow-sm border border-[#003049]/10 h-[500px] flex items-center relative overflow-hidden">
						<div class="absolute top-0 right-0 px-4 py-2 bg-[#003049]/5 text-[#003049] text-xs font-bold uppercase tracking-wider rounded-bl-xl">
							{t("explore.math.value", lang)} v(x)
						</div>
						<canvas id="valueChart" class="w-full h-full relative z-10"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Alpha (Curvature) -->
						<div class="bg-[#003049] p-8 rounded-2xl shadow-lg text-[#FFF9ED]">
							<div class="flex justify-between items-center mb-6">
								<div>
									<label class="font-figtree text-xl font-bold block mb-1">
										Sensibilité aux Montants
									</label>
									<span class="font-figtree text-sm text-[#669bbc] uppercase tracking-wide font-semibold">α (alpha) • Curvature</span>
								</div>
								<div class="bg-[#FFF9ED]/10 px-4 py-2 rounded-lg border border-[#FFF9ED]/20">
									<span id="alphaValue" class="font-figtree text-2xl font-bold text-[#669bbc]">0.88</span>
								</div>
							</div>
							<input
								type="range"
								id="alphaSlider"
								min="0.1"
								max="1.5"
								step="0.01"
								value="0.88"
								class="w-full h-3 bg-[#000000]/30 rounded-lg appearance-none cursor-pointer accent-[#669bbc] hover:accent-[#FFF9ED] transition-all"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/70 mt-4 leading-relaxed border-t border-[#FFF9ED]/10 pt-4">
								L'importance accordée au montant par rapport au simple fait de gagner ou perdre. Valeurs plus faibles = sensibilité décroissante plus forte.
							</p>
						</div>

						<!-- Lambda ({t("explore.lossAversion.title", lang)}) -->
						<div class="bg-[#780000] p-8 rounded-2xl shadow-lg text-[#FFF9ED]">
							<div class="flex justify-between items-center mb-6">
								<div>
									<label class="font-figtree text-xl font-bold block mb-1">
										À Quel Point les Pertes Font Mal
									</label>
									<span class="font-figtree text-sm text-[#FFF9ED]/80 uppercase tracking-wide font-semibold">λ (lambda) • {t("explore.lossAversion.title", lang)}</span>
								</div>
								<div class="bg-[#FFF9ED]/10 px-4 py-2 rounded-lg border border-[#FFF9ED]/20">
									<span id="lambdaValue" class="font-figtree text-2xl font-bold text-[#FFF9ED]">2.25</span>
								</div>
							</div>
							<input
								type="range"
								id="lambdaSlider"
								min="1.0"
								max="4.0"
								step="0.05"
								value="2.25"
								class="w-full h-3 bg-[#000000]/30 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED] hover:accent-[#003049] transition-all"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/80 mt-4 leading-relaxed border-t border-[#FFF9ED]/10 pt-4">
								λ = 2,25 signifie qu'une perte de 10$ est ressentie aussi intensément qu'un gain de 22,50$. Valeurs plus élevées = les pertes font plus mal.
							</p>
						</div>

						<!-- Points Clés -->
						<div class="bg-[#FFF9ED] border border-[#003049]/10 p-6 rounded-2xl">
							<h3 class="font-figtree text-lg font-bold text-[#003049] mb-4 flex items-center gap-2">
								<svg class="w-5 h-5 text-[#669bbc]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
								Points Clés
							</h3>
							<ul class="space-y-3 font-figtree text-[#003049]/80 text-sm">
								<li class="flex items-start gap-3">
									<div class="mt-1 text-[#780000]">
										<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>
									</div>
									<span>La courbe est plus raide pour les pertes que pour les gains (asymétrie)</span>
								</li>
								<li class="flex items-start gap-3">
									<div class="mt-1 text-[#780000]">
										<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path></svg>
									</div>
									<span>Les deux côtés montrent une sensibilité décroissante</span>
								</li>
								<li class="flex items-start gap-3">
									<div class="mt-1 text-[#780000]">
										<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg>
									</div>
									<span>Les gens sont averses au risque pour les gains mais recherchent le risque pour les pertes</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- {t("explore.math.prob", lang)} Section -->
		<section class="py-16 px-6 relative overflow-hidden">
			<!-- Background Pattern -->
			<div class="absolute inset-0 opacity-5 pointer-events-none">
				<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
					<defs>
						<pattern id="grid-prob" width="40" height="40" patternUnits="userSpaceOnUse">
							<path d="M 40 0 L 0 0 0 40" fill="none" stroke="#003049" stroke-width="1"/>
						</pattern>
					</defs>
					<rect width="100%" height="100%" fill="url(#grid-prob)" />
				</svg>
			</div>

			<div class="max-w-6xl mx-auto relative z-10">
				<div class="border-l-4 border-[#669bbc] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">2. Comment Nous Distordons les Probabilités</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						Nous ne percevons pas les probabilités de manière linéaire. <strong>Les petites chances semblent plus grandes</strong> qu'elles ne le sont, tandis que <strong>les probabilités moyennes et élevées semblent moins certaines.</strong>
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Chart -->
					<div class="bg-[#FFF9ED] p-6 rounded-2xl shadow-sm border border-[#003049]/10 h-[500px] flex items-center relative overflow-hidden">
						<div class="absolute top-0 right-0 px-4 py-2 bg-[#003049]/5 text-[#003049] text-xs font-bold uppercase tracking-wider rounded-bl-xl">
							Fonction de Pondération w(p)
						</div>
						<canvas id="weightChart" class="w-full h-full relative z-10"></canvas>
					</div>

					<!-- Controls -->
					<div class="space-y-6">
						<!-- Gamma (Gains) -->
						<div class="bg-[#780000] p-8 rounded-2xl shadow-lg text-[#FFF9ED]">
							<div class="flex justify-between items-center mb-6">
								<div>
									<label class="font-figtree text-xl font-bold block mb-1">
										{t("explore.probDistortion.title", lang)} (Gains)
									</label>
									<span class="font-figtree text-sm text-[#FFF9ED]/80 uppercase tracking-wide font-semibold">(Gains) γ⁺</span>
								</div>
								<div class="bg-[#FFF9ED]/10 px-4 py-2 rounded-lg border border-[#FFF9ED]/20">
									<span id="gammaGainValue" class="font-figtree text-2xl font-bold text-[#FFF9ED]">0.61</span>
								</div>
							</div>
							<input
								type="range"
								id="gammaGainSlider"
								min="0.5"
								max="2.5"
								step="0.01"
								value="0.61"
								class="w-full h-3 bg-[#000000]/30 rounded-lg appearance-none cursor-pointer accent-[#669bbc] hover:accent-[#FFF9ED] transition-all"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/80 mt-4 leading-relaxed border-t border-[#FFF9ED]/10 pt-4">
								Valeurs plus faibles = plus de distorsion. Les petites probabilités semblent plus grandes ; les probabilités élevées semblent moins certaines.
							</p>
						</div>

						<!-- Gamma (Losses) -->
						<div class="bg-[#669bbc] p-8 rounded-2xl shadow-lg text-[#FFF9ED]">
							<div class="flex justify-between items-center mb-6">
								<div>
									<label class="font-figtree text-xl font-bold block mb-1">
										{t("explore.probDistortion.title", lang)} (Pertes)
									</label>
									<span class="font-figtree text-sm text-[#FFF9ED]/80 uppercase tracking-wide font-semibold">(Losses) δ⁻</span>
								</div>
								<div class="bg-[#FFF9ED]/10 px-4 py-2 rounded-lg border border-[#FFF9ED]/20">
									<span id="gammaLossValue" class="font-figtree text-2xl font-bold text-[#FFF9ED]">0.69</span>
								</div>
							</div>
							<input
								type="range"
								id="gammaLossSlider"
								min="0.5"
								max="2.5"
								step="0.01"
								value="0.69"
								class="w-full h-3 bg-[#000000]/30 rounded-lg appearance-none cursor-pointer accent-[#780000] hover:accent-[#FFF9ED] transition-all"
							/>
							<p class="font-figtree text-sm text-[#FFF9ED]/90 mt-4 leading-relaxed border-t border-[#FFF9ED]/10 pt-4">
								Même concept que pour les gains, mais pour les pertes. Généralement similaire à γ⁺ mais empiriquement légèrement différent.
							</p>
						</div>

						<!-- Points Clés -->
						<div class="bg-[#FFF9ED] border border-[#003049]/10 p-6 rounded-2xl">
								<h3 class="font-figtree text-lg font-bold text-[#003049] mb-4 flex items-center gap-2">
								<svg class="w-5 h-5 text-[#669bbc]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
								Exemples du Monde Réel
							</h3>
							<ul class="space-y-3 font-figtree text-[#003049]/80 text-sm">
								<li class="flex items-start gap-3">
									<span class="text-[#780000] mt-0.5 font-bold">•</span>
									<span>Billets de loterie : nous surpondérons la faible chance de gagner des millions</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-[#780000] mt-0.5 font-bold">•</span>
									<span>Assurance : nous surpondérons les petits risques de catastrophe</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-[#780000] mt-0.5 font-bold">•</span>
									<span>La ligne diagonale montre une calibration parfaite</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Transition Section -->
		<section class="py-12 px-6">
			<div class="max-w-4xl mx-auto">
				<div class="bg-[#003049] p-10 rounded-2xl text-center shadow-lg relative overflow-hidden">
					<div class="absolute top-0 left-0 w-full h-full opacity-10">
						<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
							<pattern id="grid-transition" width="20" height="20" patternUnits="userSpaceOnUse">
								<circle cx="2" cy="2" r="1" fill="#FFF9ED" />
							</pattern>
							<rect width="100%" height="100%" fill="url(#grid-transition)" />
						</svg>
					</div>
					<h2 class="font-figtree text-3xl font-bold text-[#FFF9ED] mb-4 relative z-10">From Risk to Trust</h2>
					<p class="font-figtree text-lg text-[#FFF9ED]/85 leading-relaxed relative z-10 max-w-2xl mx-auto">
						La Théorie des Perspectives fonctionne pour les lancers de pièce et les dés. <strong>Mais qu'en est-il de faire confiance aux gens ?</strong>
					</p>
				</div>
			</div>
		</section>

		<!-- Comparison Tool Section -->
		<section class="py-16 px-6">
			<div class="max-w-6xl mx-auto">
				<div class="border-l-4 border-[#780000] pl-8 mb-12">
					<h2 class="font-figtree text-4xl font-bold text-[#003049] mb-4">3. Testez par Vous-Même</h2>
					<p class="font-figtree text-lg text-[#003049]/80 leading-relaxed">
						Même pari. Source différente. <strong>Ajustez les curseurs</strong> to see how your perception changes.
					</p>
				</div>

				<!-- Description du Scénario Commun -->
				<div class="bg-[#FFF9ED] border border-[#003049]/10 p-8 rounded-2xl mb-8 relative shadow-sm">
					<!-- Left Arrow -->
					<button id="prevScenario" class="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-[#003049] hover:bg-[#780000] text-[#FFF9ED] rounded-full flex items-center justify-center transition-all shadow-md z-20">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
						</svg>
					</button>					<!-- Right Arrow -->
					<button id="nextScenario" class="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-[#003049] hover:bg-[#780000] text-[#FFF9ED] rounded-full flex items-center justify-center transition-all shadow-md z-20">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
						</svg>
					</button>

					<h3 class="font-figtree text-2xl font-bold text-[#003049] mb-8 text-center uppercase tracking-widest text-sm">Scénario Actuel</h3>
					
					<div id="scenarioContent" class="bg-[#003049]/5 p-8 rounded-2xl max-w-3xl mx-auto transition-all duration-500 border border-[#003049]/5">
						<div class="flex justify-between items-center mb-6 pb-6 border-b border-[#003049]/10">
							<span class="font-figtree text-[#003049] font-bold text-xl">Votre investissement</span>
							<span id="scenarioInvestment" class="font-figtree text-3xl font-black text-[#003049] transition-all duration-500">$10</span>
						</div>
						<div class="grid grid-cols-2 gap-8">
							<div class="bg-[#FFF9ED] p-4 rounded-xl border border-[#669bbc]/20">
								<div class="flex justify-between items-center mb-2">
									<span class="font-figtree text-[#003049] font-semibold">Si vous gagnez</span>
									<span id="scenarioWinProb" class="text-[#669bbc] text-sm font-bold bg-[#669bbc]/10 px-2 py-1 rounded">60%</span>
								</div>
								<span id="scenarioWinAmount" class="font-figtree text-3xl font-bold text-[#669bbc] transition-all duration-500 block">+$30</span>
							</div>
							<div class="bg-[#FFF9ED] p-4 rounded-xl border border-[#780000]/20">
								<div class="flex justify-between items-center mb-2">
									<span class="font-figtree text-[#003049] font-semibold">Si vous perdez</span>
									<span id="scenarioLoseProb" class="text-[#780000] text-sm font-bold bg-[#780000]/10 px-2 py-1 rounded">40%</span>
								</div>
								<span id="scenarioLoseAmount" class="font-figtree text-3xl font-bold text-[#780000] transition-all duration-500 block">-$10</span>
							</div>
						</div>

						
						<!-- Comparaison Rapide Summary (Mobile Optimized) -->
						<div class="mt-8 pt-6 border-t border-[#003049]/10">
							<p class="font-figtree text-sm text-[#003049]/60 font-bold uppercase tracking-widest mb-4 text-center">Comparaison Rapide</p>
							<div class="grid grid-cols-2 gap-4">
								<div class="bg-[#780000]/5 p-3 rounded-lg border border-[#780000]/10 text-center">
									<span class="block font-figtree text-xs text-[#780000] font-bold uppercase mb-1">Valeur Confiance</span>
									<span id="quickTrustValue" class="font-figtree text-2xl font-black text-[#780000]">+2.4</span>
								</div>
								<div class="bg-[#669bbc]/5 p-3 rounded-lg border border-[#669bbc]/10 text-center">
									<span class="block font-figtree text-xs text-[#669bbc] font-bold uppercase mb-1">Valeur Risque</span>
									<span id="quickRiskValue" class="font-figtree text-2xl font-black text-[#669bbc]">+2.4</span>
								</div>
							</div>
						</div>
					</div>
					<p class="font-figtree text-sm text-[#003049]/60 text-center mt-6 italic">
						Mêmes chiffres. Sources différentes. Cela change-t-il votre décision ?
					</p>
				</div>

				<div class="grid md:grid-cols-2 gap-8">
					<!-- Trust Scenario -->
					<div class="bg-[#780000] p-8 rounded-2xl shadow-xl text-[#FFF9ED] flex flex-col h-full">
						<div class="flex items-center gap-4 mb-6 pb-6 border-b border-[#FFF9ED]/20">
							<div class="w-14 h-14 bg-[#FFF9ED] rounded-xl flex items-center justify-center shadow-inner">
								<svg class="w-8 h-8 text-[#780000]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
								</svg>
							</div>
							<div>
								<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">{t("explore.scenarios.trust.title", lang)}</h3>
								<p class="font-figtree text-[#FFF9ED]/80 text-sm">Contexte Social</p>
							</div>
						</div>
						
						<div class="bg-[#FFF9ED]/10 p-4 rounded-xl mb-6 border border-[#FFF9ED]/10">
							<p class="font-figtree text-[#FFF9ED]/90 leading-relaxed text-center">
								Un inconnu décide. Il rend la pareille <span id="trustProbText" class="font-bold text-[#FFF9ED] bg-[#FFF9ED]/20 px-1 rounded">60%</span> of the time.
							</p>
						</div>

						<!-- Result Display (Moved to Top) -->
						<div class="bg-[#FFF9ED] p-6 rounded-xl transition-transform duration-300 shadow-lg mb-8">
							<div class="flex justify-between items-end mb-2">
								<p class="font-figtree text-sm text-[#780000] font-bold uppercase tracking-wide">Valeur Subjective</p>
								<p class="font-figtree text-2xl font-black text-[#780000]" id="trustValue">+2.4</p>
							</div>
							
							<!-- Progress Bar -->
							<div class="w-full bg-[#780000]/10 rounded-full h-4 mb-4 overflow-hidden">
								<div id="trustBar" class="bg-[#780000] h-4 rounded-full transition-all duration-300 flex items-center justify-end pr-2 relative" style="width: 50%">
									<span class="font-figtree text-[10px] font-bold text-[#FFF9ED] absolute right-2 opacity-0">2.4</span>
								</div>
							</div>
							
							<div id="trustRecommendation" class="text-center border-t border-[#780000]/10 pt-4">
								<p class="font-figtree text-lg font-bold text-[#780000]">Oui, cela vaut la peine d'investir</p>
							</div>
						</div>

						<!-- Trust Parameters (Compact) -->
						<div class="space-y-4 flex-grow">
							<p class="font-figtree text-xs text-[#FFF9ED]/60 font-bold uppercase tracking-widest mb-2">Ajuster les Paramètres de Confiance</p>
							
							<div class="space-y-3">
								<!-- Alpha -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Sensitivity α</span>
										<span id="trustAlphaVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">0.95</span>
									</div>
									<input type="range" id="trustAlpha" min="0.1" max="1.5" step="0.01" value="0.95" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Lambda -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">{t("explore.lossAversion.title", lang)} λ</span>
										<span id="trustLambdaVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">2.70</span>
									</div>
									<input type="range" id="trustLambda" min="0.1" max="4.0" step="0.01" value="2.70" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Gamma Gain -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Distorsion (Gains) γ⁺</span>
										<span id="trustGammaGVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">2.01</span>
									</div>
									<input type="range" id="trustGammaG" min="0.5" max="2.5" step="0.01" value="2.01" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Gamma Loss -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Distorsion (Pertes) δ⁻</span>
										<span id="trustGammaLVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">0.51</span>
									</div>
									<input type="range" id="trustGammaL" min="0.5" max="2.5" step="0.01" value="0.51" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
							</div>
						</div>
					</div>

					<!-- Risk Scenario -->
					<div class="bg-[#669bbc] p-8 rounded-2xl shadow-xl text-[#FFF9ED] flex flex-col h-full">
						<div class="flex items-center gap-4 mb-6 pb-6 border-b border-[#FFF9ED]/20">
							<div class="w-14 h-14 bg-[#FFF9ED] rounded-xl flex items-center justify-center shadow-inner">
								<svg class="w-8 h-8 text-[#669bbc]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
									<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"></path>
								</svg>
							</div>
							<div>
								<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED]">{t("explore.scenarios.risk.title", lang)}</h3>
								<p class="font-figtree text-[#FFF9ED]/80 text-sm">Non-Social</p>
							</div>
						</div>
						
						<div class="bg-[#FFF9ED]/10 p-4 rounded-xl mb-6 border border-[#FFF9ED]/10">
							<p class="font-figtree text-[#FFF9ED]/90 leading-relaxed text-center">
								Un ordinateur décide. <span id="riskProbText" class="font-bold text-[#FFF9ED] bg-[#FFF9ED]/20 px-1 rounded">60%</span> chance de gagner.
							</p>
						</div>

						<!-- Result Display (Moved to Top) -->
						<div class="bg-[#FFF9ED] p-6 rounded-xl transition-transform duration-300 shadow-lg mb-8">
							<div class="flex justify-between items-end mb-2">
								<p class="font-figtree text-sm text-[#669bbc] font-bold uppercase tracking-wide">Valeur Subjective</p>
								<p class="font-figtree text-2xl font-black text-[#669bbc]" id="riskValue">+2.4</p>
							</div>
							
							<!-- Progress Bar -->
							<div class="w-full bg-[#669bbc]/10 rounded-full h-4 mb-4 overflow-hidden">
								<div id="riskBar" class="bg-[#669bbc] h-4 rounded-full transition-all duration-300 flex items-center justify-end pr-2 relative" style="width: 50%">
									<span class="font-figtree text-[10px] font-bold text-[#FFF9ED] absolute right-2 opacity-0">2.4</span>
								</div>
							</div>
							
							<div id="riskRecommendation" class="text-center border-t border-[#669bbc]/10 pt-4">
								<p class="font-figtree text-lg font-bold text-[#669bbc]">Oui, cela vaut la peine d'investir</p>
							</div>
						</div>

						<!-- Risk Parameters (Compact) -->
						<div class="space-y-4 flex-grow">
							<p class="font-figtree text-xs text-[#FFF9ED]/60 font-bold uppercase tracking-widest mb-2">Ajuster les Paramètres de Risque</p>
							
							<div class="space-y-3">
								<!-- Alpha -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Sensitivity α</span>
										<span id="riskAlphaVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">0.88</span>
									</div>
									<input type="range" id="riskAlpha" min="0.1" max="1.5" step="0.01" value="0.88" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Lambda -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">{t("explore.lossAversion.title", lang)} λ</span>
										<span id="riskLambdaVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">2.25</span>
									</div>
									<input type="range" id="riskLambda" min="1.0" max="4.0" step="0.05" value="2.25" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Gamma Gain -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Distorsion (Gains) γ⁺</span>
										<span id="riskGammaGVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">0.61</span>
									</div>
									<input type="range" id="riskGammaG" min="0.5" max="2.5" step="0.01" value="0.61" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
								
								<!-- Gamma Loss -->
								<div class="bg-[#000000]/20 px-4 py-3 rounded-xl">
									<div class="flex justify-between items-center mb-2">
										<span class="font-figtree text-sm text-[#FFF9ED] font-medium">Distorsion (Pertes) δ⁻</span>
										<span id="riskGammaLVal" class="font-figtree text-sm font-bold text-[#FFF9ED]">0.69</span>
									</div>
									<input type="range" id="riskGammaL" min="0.5" max="2.5" step="0.01" value="0.69" class="w-full h-1.5 bg-[#FFF9ED]/20 rounded-lg appearance-none cursor-pointer accent-[#FFF9ED]"/>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Explanation -->
				<div class="mt-12 bg-[#003049] p-10 rounded-2xl shadow-lg relative overflow-hidden">
					<div class="absolute top-0 right-0 w-64 h-64 bg-[#669bbc] rounded-full filter blur-[80px] opacity-20 transform translate-x-1/2 -translate-y-1/2"></div>
					
					<div class="relative z-10">
						<h3 class="font-figtree text-2xl font-bold text-[#FFF9ED] mb-6 flex items-center gap-3">
							<span class="bg-[#FFF9ED]/10 p-2 rounded-lg">
								<svg class="w-6 h-6 text-[#FFF9ED]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
							</span>
							Le Point Principal
						</h3>
						<p class="font-figtree text-xl text-[#FFF9ED]/90 leading-relaxed mb-8 max-w-3xl">
							Même pari. Décision différente. Vos paramètres changent votre perception.
						</p>
						<div class="grid md:grid-cols-2 gap-6">
							<ul class="space-y-4 font-figtree text-[#FFF9ED]/80">
								<li class="flex items-start gap-3">
									<span class="text-[#669bbc] mt-1 font-bold">→</span>
									<span><strong class="text-[#FFF9ED]">Paramètres = perception.</strong> Mêmes chiffres, ressentis différents.</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-[#669bbc] mt-1 font-bold">→</span>
									<span><strong class="text-[#FFF9ED]">Aversion aux pertes élevée ?</strong> Même les bons paris font peur.</span>
								</li>
							</ul>
							<ul class="space-y-4 font-figtree text-[#FFF9ED]/80">
								<li class="flex items-start gap-3">
									<span class="text-[#669bbc] mt-1 font-bold">→</span>
									<span><strong class="text-[#FFF9ED]">Distordre les probabilités ?</strong> Change tout.</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-[#669bbc] mt-1 font-bold">→</span>
									<span><strong class="text-[#FFF9ED]">Ma recherche :</strong> La confiance et le risque utilisent-ils des paramètres différents ?</span>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- CTA Section -->
		<section class="py-20 px-6">
			<div class="max-w-4xl mx-auto text-center">
				<div class="bg-[#003049] p-12 rounded-3xl shadow-2xl relative overflow-hidden">
					<!-- Background Pattern -->
					<div class="absolute inset-0 opacity-10 pointer-events-none">
						<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg">
							<pattern id="grid-cta" width="40" height="40" patternUnits="userSpaceOnUse">
								<path d="M 40 0 L 0 0 0 40" fill="none" stroke="#FFF9ED" stroke-width="1"/>
							</pattern>
							<rect width="100%" height="100%" fill="url(#grid-cta)" />
						</svg>
					</div>

					<div class="relative z-10">
						<h2 class="font-figtree text-4xl font-bold text-[#FFF9ED] mb-6">Découvrez Comment Nous Construisons Cela</h2>
						<p class="font-figtree text-xl text-[#FFF9ED]/80 mb-10 max-w-2xl mx-auto leading-relaxed">
							Maintenant que vous comprenez la théorie, découvrez comment nous avons conçu l'expérience pour mesurer ces paramètres dans le cerveau.
						</p>
						<a href="/fr/journey" class="inline-flex items-center gap-3 bg-[#780000] hover:bg-[#9a0000] text-[#FFF9ED] px-8 py-4 rounded-xl font-figtree font-bold text-lg transition-all transform hover:scale-105 shadow-lg">
							{t("explore.cta.button", lang)}
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
							</svg>
						</a>
					</div>
				</div>
			</div>
		</section>

		<!-- Footer -->
		<Footer lang={lang} />
	</main>
</Layout>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script define:vars={{ valueLabel: t("explore.math.value", lang) }}>
window.addEventListener('load', function() {
	// Wait for Chart.js to load
	if (typeof Chart === 'undefined') {
		console.error('Chart.js failed to load');
		return;
	}

	// Parameters for main charts (Value Function and Probability Weighting)
	let alpha = 0.88;
	let lambda = 2.25;
	let gammaGain = 0.61;
	let gammaLoss = 0.69;

	// Parameters for Trust and Risk scenarios (separate)
	// Trust parameters (social context)
	let trustAlpha = 0.95;      // α_trust - increased sensitivity to outcomes in trust
	let trustLambda = 2.70;     // λ_trust - betrayal aversion
	let trustGammaGain = 2.01;  // γ_trust - probability weighting for gains (S-shaped)
	let trustGammaLoss = 0.51;  // δ_trust - probability weighting for losses

	// Risk parameters (non-social context)
	let riskAlpha = 0.88;       // α - sensitivity to outcomes
	let riskLambda = 2.25;      // λ - loss aversion
	let riskGammaGain = 0.61;   // γ - probability weighting for gains
	let riskGammaLoss = 0.69;   // δ - probability weighting for losses

	// Define multiple scenarios - mix of high and low probability scenarios
	const scenarios = [
		// High probability scenarios (Trust > Risk expected)
		{ investment: 10, winAmount: 30, loseAmount: 10, winProb: 0.6, loseProb: 0.4 },
		{ investment: 15, winAmount: 45, loseAmount: 15, winProb: 0.65, loseProb: 0.35 },
		{ investment: 20, winAmount: 50, loseAmount: 20, winProb: 0.7, loseProb: 0.3 },
		{ investment: 30, winAmount: 75, loseAmount: 30, winProb: 0.65, loseProb: 0.35 },
		{ investment: 18, winAmount: 55, loseAmount: 18, winProb: 0.62, loseProb: 0.38 },
		{ investment: 22, winAmount: 65, loseAmount: 22, winProb: 0.68, loseProb: 0.32 },
		{ investment: 16, winAmount: 48, loseAmount: 16, winProb: 0.63, loseProb: 0.37 },

		// Medium probability scenarios
		{ investment: 5, winAmount: 20, loseAmount: 5, winProb: 0.5, loseProb: 0.5 },
		{ investment: 25, winAmount: 60, loseAmount: 25, winProb: 0.55, loseProb: 0.45 },
		{ investment: 12, winAmount: 40, loseAmount: 12, winProb: 0.52, loseProb: 0.48 },

		// Low probability scenarios (Risk > Trust expected)
		{ investment: 15, winAmount: 60, loseAmount: 15, winProb: 0.35, loseProb: 0.65 },
		{ investment: 10, winAmount: 50, loseAmount: 10, winProb: 0.3, loseProb: 0.7 },
		{ investment: 20, winAmount: 80, loseAmount: 20, winProb: 0.4, loseProb: 0.6 },
		{ investment: 8, winAmount: 40, loseAmount: 8, winProb: 0.35, loseProb: 0.65 },
		{ investment: 12, winAmount: 55, loseAmount: 12, winProb: 0.38, loseProb: 0.62 }
	];

	let currentScenarioIndex = 0;

	// Value function: v(x) = x^α for gains, -λ * |x|^α for losses
	function valueFunction(x, a, l) {
		if (x >= 0) {
			return Math.pow(x, a);
		} else {
			return -l * Math.pow(Math.abs(x), a);
		}
	}

	// Probability weighting function: w(p) = p^γ / (p^γ + (1-p)^γ)^(1/γ)
	function weightFunction(p, g) {
		if (p === 0) return 0;
		if (p === 1) return 1;
		const numerator = Math.pow(p, g);
		const denominator = Math.pow(numerator + Math.pow(1 - p, g), 1 / g);
		return numerator / denominator;
	}

	// Generate data for value function chart
	function generateValueData(a, l) {
		const data = [];
		for (let x = -50; x <= 50; x += 0.5) {
			data.push({ x: x, y: valueFunction(x, a, l) });
		}
		return data;
	}

	// Generate data for weighting function chart
	function generateWeightData(g) {
		const data = [];
		for (let p = 0; p <= 1; p += 0.01) {
			data.push({ x: p, y: weightFunction(p, g) });
		}
		return data;
	}

	// Create value function chart
	const valueCtx = document.getElementById('valueChart');
	const valueChart = new Chart(valueCtx, {
		type: 'line',
		data: {
			datasets: [
				{
					label: valueLabel,
					data: generateValueData(alpha, lambda),
					borderColor: '#780000',
					backgroundColor: 'rgba(120, 0, 0, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Rationalité Parfaite',
					data: [{ x: -50, y: -50 }, { x: 50, y: 50 }],
					borderColor: '#003049',
					borderWidth: 2,
					borderDash: [5, 5],
					pointRadius: 0
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					title: {
						display: true,
						text: 'Résultat (gains/pertes)',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					title: {
						display: true,
						text: 'Valeur Subjective',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: {
					display: true,
					position: 'bottom',
					labels: {
						font: { family: 'Figtree', size: 12 },
						color: '#003049',
						usePointStyle: true,
						padding: 15
					}
				},
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 },
					callbacks: {
						label: function(context) {
							return `Valeur : ${context.parsed.y.toFixed(2)}`;
						}
					}
				}
			}
		}
	});

	// Create probability weighting chart
	const weightCtx = document.getElementById('weightChart');
	const weightChart = new Chart(weightCtx, {
		type: 'line',
		data: {
			datasets: [
				{
					label: 'Pondération des Gains',
					data: generateWeightData(gammaGain),
					borderColor: '#780000',
					backgroundColor: 'rgba(120, 0, 0, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Pondération des Pertes',
					data: generateWeightData(gammaLoss),
					borderColor: '#669bbc',
					backgroundColor: 'rgba(102, 155, 188, 0.1)',
					borderWidth: 3,
					pointRadius: 0,
					tension: 0.4
				},
				{
					label: 'Rationalité Parfaite',
					data: [{ x: 0, y: 0 }, { x: 1, y: 1 }],
					borderColor: '#003049',
					borderWidth: 2,
					borderDash: [5, 5],
					pointRadius: 0
				}
			]
		},
		options: {
			responsive: true,
			maintainAspectRatio: false,
			scales: {
				x: {
					type: 'linear',
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Probabilité Objective',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				},
				y: {
					min: 0,
					max: 1,
					title: {
						display: true,
						text: 'Poids Décisionnel',
						font: { size: 14, family: 'Figtree', weight: 'bold' },
						color: '#003049'
					},
					grid: { color: 'rgba(0, 48, 73, 0.1)' },
					ticks: { color: '#003049', font: { family: 'Figtree' } }
				}
			},
			plugins: {
				legend: {
					display: true,
					position: 'bottom',
					labels: {
						font: { family: 'Figtree', size: 12 },
						color: '#003049',
						usePointStyle: true,
						padding: 15
					}
				},
				tooltip: {
					backgroundColor: '#003049',
					titleFont: { family: 'Figtree', size: 14 },
					bodyFont: { family: 'Figtree', size: 12 }
				}
			}
		}
	});

	// Update value chart
	function updateValueChart() {
		valueChart.data.datasets[0].data = generateValueData(alpha, lambda);
		valueChart.update();
		updateComparison();
	}

	// Update weight chart
	function updateWeightChart() {
		weightChart.data.datasets[0].data = generateWeightData(gammaGain);
		weightChart.data.datasets[1].data = generateWeightData(gammaLoss);
		weightChart.update();
		updateComparison();
	}

	// Calculate prospect theory value for a gamble
	function calculateProspectValue(gain, loss, pGain, isGain, a, l, gGain, gLoss) {
		const vGain = valueFunction(gain, a, l);
		const vLoss = valueFunction(-loss, a, l);
		const wGain = weightFunction(pGain, isGain ? gGain : gLoss);
		const wLoss = weightFunction(1 - pGain, isGain ? gLoss : gGain);
		return wGain * vGain + wLoss * vLoss;
	}

	// Update scenario display with smooth animation
	function updateScenarioDisplay(direction = 'right') {
		const scenario = scenarios[currentScenarioIndex];
		const content = document.getElementById('scenarioContent');

		// Add fade-out and slide animation based on direction
		const slideDistance = direction === 'right' ? '20px' : '-20px';
		content.style.opacity = '0';
		content.style.transform = `translateX(${slideDistance}) scale(0.95)`;

		// Wait for animation, then update values
		setTimeout(() => {
			document.getElementById('scenarioInvestment').textContent = `$${scenario.investment}`;
			document.getElementById('scenarioWinAmount').textContent = `+$${scenario.winAmount}`;
			document.getElementById('scenarioLoseAmount').textContent = `-$${scenario.loseAmount}`;
			document.getElementById('scenarioWinProb').textContent = `(${(scenario.winProb * 100).toFixed(0)}% de chance)`;
			document.getElementById('scenarioLoseProb').textContent = `(${(scenario.loseProb * 100).toFixed(0)}% de chance)`;

			// Update probability in Trust and Risk cards
			const probPercent = (scenario.winProb * 100).toFixed(0);
			document.getElementById('trustProbText').textContent = `${probPercent}%`;
			document.getElementById('riskProbText').textContent = `${probPercent}%`;

			// Slide and fade back in from opposite direction
			const slideBackDistance = direction === 'right' ? '-20px' : '20px';
			content.style.transform = `translateX(${slideBackDistance}) scale(0.95)`;

			setTimeout(() => {
				content.style.opacity = '1';
				content.style.transform = 'translateX(0) scale(1)';
			}, 50);

			updateComparison(true);
		}, 200);
	}

	// Update comparison values
	function updateComparison(animate = false) {
		const scenario = scenarios[currentScenarioIndex];
		const trustVal = calculateProspectValue(scenario.winAmount, scenario.loseAmount, scenario.winProb, true, trustAlpha, trustLambda, trustGammaGain, trustGammaLoss);
		const riskVal = calculateProspectValue(scenario.winAmount, scenario.loseAmount, scenario.winProb, true, riskAlpha, riskLambda, riskGammaGain, riskGammaLoss);

		// Update text values
		document.getElementById('trustValue').textContent = (trustVal >= 0 ? '+' : '') + trustVal.toFixed(2);
		document.getElementById('riskValue').textContent = (riskVal >= 0 ? '+' : '') + riskVal.toFixed(2);

		// Update Comparaison Rapide values
		document.getElementById('quickTrustValue').textContent = (trustVal >= 0 ? '+' : '') + trustVal.toFixed(2);
		document.getElementById('quickRiskValue').textContent = (riskVal >= 0 ? '+' : '') + riskVal.toFixed(2);

		// Update progress bars
		// Scale: -10 to +10 maps to 0% to 100%
		const maxValue = 10;
		const minValue = -10;

		const trustPercent = Math.max(0, Math.min(100, ((trustVal - minValue) / (maxValue - minValue)) * 100));
		const riskPercent = Math.max(0, Math.min(100, ((riskVal - minValue) / (maxValue - minValue)) * 100));

		const trustBar = document.getElementById('trustBar');
		const riskBar = document.getElementById('riskBar');

		// Add pulse animation if scenario changed
		if (animate) {
			const trustContainer = trustBar.parentElement.parentElement;
			const riskContainer = riskBar.parentElement.parentElement;

			trustContainer.style.transform = 'scale(1.05)';
			riskContainer.style.transform = 'scale(1.05)';

			setTimeout(() => {
				trustContainer.style.transform = 'scale(1)';
				riskContainer.style.transform = 'scale(1)';
			}, 300);
		}

		trustBar.style.width = trustPercent + '%';
		riskBar.style.width = riskPercent + '%';

		// Update number inside bar
		trustBar.querySelector('span').textContent = trustVal.toFixed(1);
		riskBar.querySelector('span').textContent = riskVal.toFixed(1);

		// Update recommendation messages
		const trustRecommendation = document.getElementById('trustRecommendation');
		const riskRecommendation = document.getElementById('riskRecommendation');

		if (trustVal >= 0) {
			trustRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#780000]">Oui, cela vaut la peine d\'investir</p>';
		} else {
			trustRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#780000]">Non, cela ne vaut pas la peine d\'investir</p>';
		}

		if (riskVal >= 0) {
			riskRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#669bbc]">Oui, cela vaut la peine d\'investir</p>';
		} else {
			riskRecommendation.innerHTML = '<p class="font-figtree text-lg font-bold text-[#669bbc]">Non, cela ne vaut pas la peine d\'investir</p>';
		}
	}

	// Alpha slider
	const alphaSlider = document.getElementById('alphaSlider');
	const alphaValue = document.getElementById('alphaValue');
	alphaSlider.addEventListener('input', (e) => {
		alpha = parseFloat(e.target.value);
		alphaValue.textContent = alpha.toFixed(2);
		updateValueChart();
	});

	// Lambda slider
	const lambdaSlider = document.getElementById('lambdaSlider');
	const lambdaValue = document.getElementById('lambdaValue');
	lambdaSlider.addEventListener('input', (e) => {
		lambda = parseFloat(e.target.value);
		lambdaValue.textContent = lambda.toFixed(2);
		updateValueChart();
	});

	// Gamma gain slider
	const gammaGainSlider = document.getElementById('gammaGainSlider');
	const gammaGainValue = document.getElementById('gammaGainValue');
	gammaGainSlider.addEventListener('input', (e) => {
		gammaGain = parseFloat(e.target.value);
		gammaGainValue.textContent = gammaGain.toFixed(2);
		updateWeightChart();
	});

	// Gamma loss slider
	const gammaLossSlider = document.getElementById('gammaLossSlider');
	const gammaLossValue = document.getElementById('gammaLossValue');
	gammaLossSlider.addEventListener('input', (e) => {
		gammaLoss = parseFloat(e.target.value);
		gammaLossValue.textContent = gammaLoss.toFixed(2);
		updateWeightChart();
	});

	// Trust scenario sliders
	document.getElementById('trustAlpha').addEventListener('input', (e) => {
		trustAlpha = parseFloat(e.target.value);
		document.getElementById('trustAlphaVal').textContent = trustAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustLambda').addEventListener('input', (e) => {
		trustLambda = parseFloat(e.target.value);
		document.getElementById('trustLambdaVal').textContent = trustLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaG').addEventListener('input', (e) => {
		trustGammaGain = parseFloat(e.target.value);
		document.getElementById('trustGammaGVal').textContent = trustGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('trustGammaL').addEventListener('input', (e) => {
		trustGammaLoss = parseFloat(e.target.value);
		document.getElementById('trustGammaLVal').textContent = trustGammaLoss.toFixed(2);
		updateComparison();
	});

	// Risk scenario sliders
	document.getElementById('riskAlpha').addEventListener('input', (e) => {
		riskAlpha = parseFloat(e.target.value);
		document.getElementById('riskAlphaVal').textContent = riskAlpha.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskLambda').addEventListener('input', (e) => {
		riskLambda = parseFloat(e.target.value);
		document.getElementById('riskLambdaVal').textContent = riskLambda.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaG').addEventListener('input', (e) => {
		riskGammaGain = parseFloat(e.target.value);
		document.getElementById('riskGammaGVal').textContent = riskGammaGain.toFixed(2);
		updateComparison();
	});

	document.getElementById('riskGammaL').addEventListener('input', (e) => {
		riskGammaLoss = parseFloat(e.target.value);
		document.getElementById('riskGammaLVal').textContent = riskGammaLoss.toFixed(2);
		updateComparison();
	});

	// Scenario navigation
	document.getElementById('prevScenario').addEventListener('click', () => {
		currentScenarioIndex = (currentScenarioIndex - 1 + scenarios.length) % scenarios.length;
		updateScenarioDisplay('left');
	});

	document.getElementById('nextScenario').addEventListener('click', () => {
		currentScenarioIndex = (currentScenarioIndex + 1) % scenarios.length;
		updateScenarioDisplay('right');
	});

	// Initialize comparison and scenario display
	updateScenarioDisplay();
	updateComparison();
});
</script>
